import tkinter as tk
import threading
import time
import random
from PIL import Image, ImageDraw, ImageTk

# ðŸ’¬ æ¸©é¦¨æç¤ºè¯­åˆ—è¡¨ï¼ˆå¯è‡ªå®šä¹‰ï¼ï¼‰
tips = [
    "è¦è®°å¾—å–æ°´å“¦(ï½žï¿£â–½ï¿£)ï½ž",
    "è¦å¤šåƒæ°´æžœ",
    "å¤©å†·äº†å¤šç©¿è¡£æœ",
    "ç¥è‡ªå·±æ¯å¤©éƒ½æœ‰å¼€å¿ƒå¿«ä¹",
    "è®°å¾—æ—©ç¡9.Â·Ì«Â·Ì«?",
    "ç¥è‡ªå·±æ¢¦æƒ³æˆçœŸ",
    "è¦å¥½å¥½åƒé¥­ {Â°â€¢Ì€Ï‰â€¢ÌÂ°}",
    "ä¸€ä¸ªäººä¹Ÿè¦å¥½å¥½çš„(ï½¡ï½¥Ï‰ï½¥ï½¡)",
    "ä¸ç®¡ç”Ÿæ´»å¤šä¸æ˜“éƒ½è¦ä¹è§‚ /// - ^ - ///",
    "è¦å¤šå–æ°´å•¦ï½ž",
    "è¦å¥½å¥½çˆ±è‡ªå·±{3}~>Ï‰<)",
    "è¦åŠ æ²¹å“¦~",
    "ä¸‡äº‹å¦‚æ„",
    "æ‰¾ä¸ªå¥½å·¥ä½œ",
    "ä¸€åˆ‡éšå¿ƒ",
    "ä½ æ¯”æƒ³è±¡ä¸­æ›´å¼ºå¤§",
    "æ¯ä¸€å¤©éƒ½æ˜¯æ–°çš„å¼€å§‹",
    "ç›¸ä¿¡è‡ªå·±ï¼Œä½ å¯ä»¥çš„",
    "ä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡",
    "ä½ å€¼å¾—æ‹¥æœ‰æœ€å¥½çš„",
    "ä¿æŒå¾®ç¬‘ï¼Œå¥½è¿ä¼šæ¥",
    "ä½ å·²ç»å¾ˆåŠªåŠ›äº†",
    "æ…¢æ…¢æ¥ï¼Œä¸è¦ç€æ€¥",
    "ä½ çš„æœªæ¥å……æ»¡å¸Œæœ›",
    "æ¯ä¸€æ­¥éƒ½ç®—æ•°",
    "ä½ æ˜¯ç‹¬ä¸€æ— äºŒçš„",
    "è¦å¯¹è‡ªå·±æ¸©æŸ”ä¸€ç‚¹",
    "ä»Šå¤©ä¹Ÿè¾›è‹¦äº†",
    "ä½ åšå¾—å¾ˆæ£’",
    "ç»§ç»­å‰è¿›ï¼Œåˆ«å›žå¤´",
    "ä½ çš„åŠªåŠ›ä¸ä¼šç™½è´¹",
    "ç›¸ä¿¡æ—¶é—´çš„åŠ›é‡",
    "ä½ ä¼šé‡è§æ›´å¥½çš„è‡ªå·±",
    "ä¿æŒçƒ­çˆ±ï¼Œå¥”èµ´å±±æµ·",
    "ä½ çš„ç¬‘å®¹å¾ˆç¾Ž",
    "è¦å¥½å¥½ä¼‘æ¯å“¦",
    "åˆ«å¤ªå‹‰å¼ºè‡ªå·±",
    "ä½ å·²ç»åšå¾—å¤Ÿå¥½äº†",
    "ç»™è‡ªå·±ä¸€ä¸ªæ‹¥æŠ±",
    "ä½ æ˜¯æœ€æ£’çš„",
    "è¦ç›¸ä¿¡ç¾Žå¥½ä¼šå‘ç”Ÿ",
    "ä½ çš„åšæŒä¼šæœ‰å›žæŠ¥",
    "ä»Šå¤©ä¹Ÿè¦å¼€å¿ƒ",
    "ä½ å€¼å¾—è¢«çˆ±",
    "è¦å¥½å¥½ç…§é¡¾è‡ªå·±",
    "ä½ çš„æ¢¦æƒ³ä¼šå®žçŽ°",
    "ä¿æŒä¹è§‚çš„å¿ƒæ€",
    "ä½ æ¯”æ˜¨å¤©æ›´è¿›æ­¥äº†",
    "è¦è®°å¾—çˆ±è‡ªå·±",
    "ä½ çš„äººç”Ÿä½ åšä¸»",
    "ç›¸ä¿¡è‡ªå·±çš„é€‰æ‹©",
    "ä½ ä¼šè¶Šæ¥è¶Šå¥½çš„",
    "è¦ä¿æŒå¥½å¿ƒæƒ…",
    "ä½ çš„åŠªåŠ›éƒ½çœ‹å¾—è§",
    "ç»™è‡ªå·±å¤šä¸€ç‚¹è€å¿ƒ",
    "ä½ æ˜¯å€¼å¾—éª„å‚²çš„",
    "è¦è®°å¾—å–„å¾…è‡ªå·±",
    "ä½ çš„æœªæ¥å¯æœŸ",
    "ä¿æŒåˆå¿ƒï¼Œç ¥ç ºå‰è¡Œ",
    "ä½ çš„æ¯ä¸€å¤©éƒ½å¾ˆé‡è¦",
    "è¦ç›¸ä¿¡è‡ªå·±çš„èƒ½åŠ›",
    "ä½ ä¼šæ‰¾åˆ°å±žäºŽè‡ªå·±çš„è·¯",
    "ä¿æŒçƒ­æƒ…ï¼Œæ‹¥æŠ±ç”Ÿæ´»",
    "ä½ çš„ä»˜å‡ºä¼šæœ‰æ”¶èŽ·",
    "è¦è®°å¾—ä¼‘æ¯æ”¾æ¾",
    "ä½ æ˜¯æœ€å‹‡æ•¢çš„",
    "ç›¸ä¿¡ä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥",
    "ä½ çš„å­˜åœ¨å¾ˆæœ‰æ„ä¹‰",
    "è¦ä¿æŒç§¯æžçš„æ€åº¦",
    "ä½ ä¼šé‡è§æ›´å¥½çš„æ˜Žå¤©",
    "ç»™è‡ªå·±ä¸€äº›é¼“åŠ±",
    "ä½ çš„äººç”Ÿå……æ»¡å¯èƒ½",
    "è¦è®°å¾—ç…§é¡¾å¥½èº«ä½“",
    "ä½ æ˜¯æœ€ç‰¹åˆ«çš„",
    "ç›¸ä¿¡è‡ªå·±çš„ç›´è§‰",
    "ä½ ä¼šå®žçŽ°æ‰€æœ‰ç›®æ ‡",
    "ä¿æŒè‡ªä¿¡ï¼Œå‹‡å¾€ç›´å‰",
    "ä½ çš„æ¯ä¸€æ­¥éƒ½æœ‰ä»·å€¼",
    "è¦è®°å¾—å¤šç¬‘ä¸€ç¬‘",
    "ä½ æ˜¯æœ€ä¼˜ç§€çš„",
    "ç›¸ä¿¡ç¾Žå¥½æ­£åœ¨è·¯ä¸Š",
    "ä½ çš„åŠªåŠ›ç»ˆä¼šå¼€èŠ±",
    "ä¿æŒå–„è‰¯ï¼Œæ¸©æš–å‰è¡Œ",
    "ä½ çš„ç”Ÿæ´»ä¼šè¶Šæ¥è¶Šå¥½",
    "è¦è®°å¾—çæƒœè‡ªå·±",
    "ä½ æ˜¯æœ€é—ªè€€çš„æ˜Ÿ",
    "ç›¸ä¿¡å¥‡è¿¹ä¼šå‘ç”Ÿ",
    "ä½ çš„æ¢¦æƒ³å€¼å¾—è¿½æ±‚",
    "ä¿æŒå¸Œæœ›ï¼Œæ°¸ä¸æ”¾å¼ƒ",
    "ä½ çš„æ¯ä¸€å¤©éƒ½å¾ˆç²¾å½©",
    "è¦è®°å¾—ç»™è‡ªå·±åŠ æ²¹",
    "ä½ æ˜¯æœ€äº†ä¸èµ·çš„",
    "ç›¸ä¿¡è‡ªå·±çš„ä»·å€¼",
    "ä½ ä¼šæ”¶èŽ·æ»¡æ»¡çš„å¹¸ç¦",
    "ä¿æŒå‹‡æ°”ï¼Œè¿ŽæŽ¥æŒ‘æˆ˜",
    "ä½ çš„äººç”Ÿç”±ä½ ä¹¦å†™",
    "è¦è®°å¾—å¥½å¥½çˆ±è‡ªå·±",
    "ä½ æ˜¯æœ€å¯çˆ±çš„",
    "ç›¸ä¿¡æ˜Žå¤©ä¼šæ›´å¥½",
    "ä½ çš„åŠªåŠ›ä¸ä¼šè¾œè´Ÿ",
    "ä¿æŒçœŸè¯šï¼Œæ´»å‡ºè‡ªæˆ‘",
]

# ðŸŽ¨ æ¸å˜è‰²æ–¹æ¡ˆï¼ˆèƒŒæ™¯è‰² + è¾¹æ¡†è‰²ï¼‰
color_schemes = [
    {"bg": "#FF6B9D", "border": "#C9184A"},  # ç²‰çº¢æ¸å˜
    {"bg": "#4ECDC4", "border": "#1A535C"},  # é’ç»¿æ¸å˜
    {"bg": "#FFB347", "border": "#FF8C42"},  # æ©™è‰²æ¸å˜
    {"bg": "#95E1D3", "border": "#38A3A5"},  # è–„è·ç»¿æ¸å˜
    {"bg": "#A8DADC", "border": "#457B9D"},  # å¤©è“æ¸å˜
    {"bg": "#F4A261", "border": "#E76F51"},  # æš–æ©™æ¸å˜
    {"bg": "#B8B8FF", "border": "#6A67CE"},  # ç´«è‰²æ¸å˜
    {"bg": "#FFD6E8", "border": "#FF9ECD"},  # æµ…ç²‰æ¸å˜
    {"bg": "#AFF8DB", "border": "#2DD4BF"},  # ç¿ ç»¿æ¸å˜
    {"bg": "#FFDAB9", "border": "#FFA07A"},  # æ¡ƒè‰²æ¸å˜
]

# ðŸ˜Š è£…é¥°æ€§è¡¨æƒ…åŒ…åˆ—è¡¨
emojis = [
    "âœ¨", "ðŸ’–", "ðŸŒŸ", "ðŸ’«", "ðŸŒˆ", 
    "ðŸŽ‰", "ðŸ’", "ðŸŒ¸", "ðŸ€", "â˜€ï¸",
    "ðŸŒº", "ðŸŽˆ", "ðŸ’", "ðŸ¦‹", "ðŸŒ»",
    "ðŸŽ€", "ðŸ’•", "â­", "ðŸŒ™", "ðŸŽŠ"
]

def create_rounded_rectangle(width, height, radius, bg_color, border_color):
    """åˆ›å»ºåœ†è§’çŸ©å½¢å›¾ç‰‡"""
    # åˆ›å»ºå¸¦é€æ˜Žé€šé“çš„å›¾ç‰‡
    image = Image.new('RGBA', (width, height), (0, 0, 0, 0))
    draw = ImageDraw.Draw(image)
    
    # ç»˜åˆ¶å¤–å±‚è¾¹æ¡†ï¼ˆåœ†è§’çŸ©å½¢ï¼‰
    draw.rounded_rectangle(
        [(0, 0), (width-1, height-1)],
        radius=radius,
        fill=border_color,
        outline=border_color
    )
    
    # ç»˜åˆ¶å†…å±‚èƒŒæ™¯ï¼ˆåœ†è§’çŸ©å½¢ï¼Œç•™å‡ºè¾¹æ¡†ï¼‰
    border_width = 4
    draw.rounded_rectangle(
        [(border_width, border_width), (width-border_width-1, height-border_width-1)],
        radius=radius-2,
        fill=bg_color,
        outline=bg_color
    )
    
    return ImageTk.PhotoImage(image)

def create_unclosable_tip():
    """åˆ›å»ºä¸€ä¸ªæ— æ³•å…³é—­çš„å¼¹çª—"""
    # éšæœºä½ç½®ï¼ˆé€‚é…1920x1080å±å¹•ï¼‰
    x = random.randint(50, 1200)
    y = random.randint(50, 700)
    
    # éšæœºé¢œè‰²æ–¹æ¡ˆ
    colors = random.choice(color_schemes)
    bg_color = colors["bg"]
    border_color = colors["border"]
    
    # çª—å£å°ºå¯¸
    width, height = 320, 140
    radius = 20  # åœ†è§’åŠå¾„
    
    # åˆ›å»ºçª—å£æ—¶ç«‹å³è®¾ç½®å±žæ€§ï¼Œé¿å…é—ªçƒ
    win = tk.Toplevel()
    win.attributes('-alpha', 0.0)  # å…ˆè®¾ç½®ä¸ºå®Œå…¨é€æ˜Ž
    win.attributes('-topmost', True)  # çª—å£ç½®é¡¶
    win.overrideredirect(True)  # ç§»é™¤æ ‡é¢˜æ 
    win.geometry(f"{width}x{height}+{x}+{y}")
    
    # è®¾ç½®çª—å£èƒŒæ™¯ä¸ºé»‘è‰²ï¼Œç”¨äºŽé€æ˜Žæ•ˆæžœ
    win.configure(bg='black')
    win.wm_attributes('-transparentcolor', 'black')
    
    # åˆ›å»ºåœ†è§’èƒŒæ™¯å›¾ç‰‡
    bg_image = create_rounded_rectangle(width, height, radius, bg_color, border_color)
    
    # åˆ›å»ºCanvasæ¥æ˜¾ç¤ºåœ†è§’èƒŒæ™¯
    canvas = tk.Canvas(
        win,
        width=width,
        height=height,
        bg='black',
        highlightthickness=0
    )
    canvas.pack()
    
    # æ˜¾ç¤ºåœ†è§’èƒŒæ™¯
    canvas.create_image(0, 0, image=bg_image, anchor='nw')
    canvas.image = bg_image  # ä¿æŒå¼•ç”¨ï¼Œé˜²æ­¢è¢«åžƒåœ¾å›žæ”¶
    
    # æ·»åŠ è£…é¥°æ€§å›¾æ ‡/emojiï¼ˆéšæœºé€‰æ‹©ï¼‰
    canvas.create_text(
        width // 2,
        35,
        text=random.choice(emojis),
        font=("Segoe UI Emoji", 22),
        fill="white"
    )
    
    # æ˜¾ç¤ºæ¸©é¦¨æ–‡å­—
    tip_text = random.choice(tips)
    canvas.create_text(
        width // 2,
        90,
        text=tip_text,
        font=("å¾®è½¯é›…é»‘", 12, "bold"),
        fill="white",
        width=280,
        justify="center"
    )
    
    # æ›´æ–°çª—å£ï¼Œç¡®ä¿æ‰€æœ‰é…ç½®ç”Ÿæ•ˆ
    win.update_idletasks()
    
    # æ¸æ˜¾åŠ¨ç”»æ•ˆæžœ
    def fade_in(alpha=0.0):
        if alpha < 1.0:
            alpha += 0.1
            win.attributes('-alpha', alpha)
            win.after(20, lambda: fade_in(alpha))
        else:
            win.attributes('-alpha', 0.95)  # æœ€ç»ˆé€æ˜Žåº¦95%ï¼Œæ›´æŸ”å’Œ
    
    fade_in()

def start_spawning():
    """æŒç»­åˆ›å»ºå¼¹çª—ï¼ˆæ¯0.5~2ç§’ä¸€ä¸ªï¼‰"""
    while True:
        create_unclosable_tip()
        time.sleep(random.uniform(0.1, 0.1))  # éšæœºé—´éš”ï¼Œé¿å…å¡é¡¿

# ðŸš€ ä¸»ç¨‹åºå…¥å£
if __name__ == "__main__":
    root = tk.Tk()
    root.withdraw()  # éšè—ä¸»çª—å£ï¼ˆåªæ˜¾ç¤ºå¼¹çª—ï¼‰

    # å¯åŠ¨å¼¹çª—çº¿ç¨‹ï¼ˆdaemon=Trueï¼šä¸»ç¨‹åºé€€å‡ºæ—¶è‡ªåŠ¨ç»“æŸï¼‰
    thread = threading.Thread(target=start_spawning, daemon=True)
    thread.start()

    root.mainloop()
